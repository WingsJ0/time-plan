(function(e){function t(t){for(var c,r,i=t[0],s=t[1],l=t[2],d=0,u=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);f&&f(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,r=1;r<n.length;r++){var i=n[r];0!==a[i]&&(c=!1)}c&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var c={},r={app:0},a={app:0},o=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-00caf272":"b8607c39","chunk-0261934a":"6a0f3471","chunk-6b857236":"ccb48fc3"}[e]+".js"}function s(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-00caf272":1,"chunk-0261934a":1,"chunk-6b857236":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-00caf272":"5e783a13","chunk-0261934a":"275650df","chunk-6b857236":"ff4b2880"}[e]+".css",a=s.p+c,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var l=o[i],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===c||d===a))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){l=u[i],d=l.getAttribute("data-href");if(d===c||d===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var c=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=c,delete r[e],f.parentNode.removeChild(f),n(o)},f.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(f)})).then((function(){r[e]=0})));var c=a[e];if(0!==c)if(c)t.push(c[2]);else{var o=new Promise((function(t,n){c=a[e]=[t,n]}));t.push(c[2]=o);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+c+": "+r+")",u.name="ChunkLoadError",u.type=c,u.request=r,n[1](u)}a[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=c,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(n,c,function(t){return e[t]}.bind(null,c));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var f=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"14f7":function(e,t,n){},4355:function(e,t,n){"use strict";n("14f7")},"74cd":function(e,t,n){},"7ea6":function(e,t,n){"use strict";n("89d9")},"89d9":function(e,t,n){},a821:function(e,t,n){"use strict";n("ccce")},b41a:function(e,t,n){e.exports=n.p+"img/delete.53f60c61.svg"},ccce:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function r(e,t){var n=Object(c["A"])("router-view");return Object(c["t"])(),Object(c["g"])(n,null,{default:Object(c["J"])((function(e){var t=e.Component;return[(Object(c["t"])(),Object(c["g"])(c["b"],null,[(Object(c["t"])(),Object(c["g"])(Object(c["C"])(t)))],1024))]})),_:1})}n("d81d");const a={};a.render=r;var o=a,i=n("9483");Object(i["a"])("".concat("","service-worker.js"));n("d3b7");var s=n("6c02"),l=(n("b0c0"),n("e543")),d=n.n(l),u=n("b41a"),f=n.n(u),b=Object(c["M"])("data-v-4861d437");Object(c["w"])("data-v-4861d437");var h={class:"layout"},v={class:"directory"},m={class:"list"},p={class:"foot"},j={key:0,class:"content"},O={class:"head"},g={class:"title"},k={class:"tabs"},y=Object(c["j"])("配置"),_=Object(c["j"])("工作"),w=Object(c["j"])("进度"),S={class:"wrap"},C={class:"modal"},M={class:"dialog"};Object(c["u"])();var Y=b((function(e,t,n,r,a,o){var i=Object(c["A"])("router-link"),s=Object(c["A"])("router-view"),l=Object(c["A"])("add-dialog"),u=Object(c["A"])("remove-dialog");return Object(c["t"])(),Object(c["g"])("div",h,[Object(c["k"])("div",v,[Object(c["k"])("div",m,[(Object(c["t"])(!0),Object(c["g"])(c["a"],null,Object(c["z"])(e.directory,(function(t){return Object(c["t"])(),Object(c["g"])("div",{key:t.id,class:["entry",{active:e.current===t.id}],onClick:function(n){return e.handle_entry_click(t.id)}},Object(c["E"])(t.name),11,["onClick"])})),128))]),Object(c["k"])("div",p,[Object(c["k"])("img",{class:"button",src:d.a,onClick:t[1]||(t[1]=function(){return e.handle_add_click&&e.handle_add_click.apply(e,arguments)})})])]),e.current?(Object(c["t"])(),Object(c["g"])("div",j,[Object(c["k"])("div",O,[Object(c["k"])("div",g,[Object(c["K"])(Object(c["k"])("input",{class:"name","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.project.name=t}),onChange:t[3]||(t[3]=function(){return e.handle_name_change&&e.handle_name_change.apply(e,arguments)})},null,544),[[c["G"],e.project.name]]),Object(c["k"])("img",{class:"remove",src:f.a,onClick:t[4]||(t[4]=function(){return e.handle_remove_click&&e.handle_remove_click.apply(e,arguments)})})]),Object(c["k"])("div",k,[Object(c["k"])(i,{class:"tab","active-class":"active",tag:"span",to:{name:"config"}},{default:b((function(){return[y]})),_:1}),Object(c["k"])(i,{class:"tab","active-class":"active",tag:"span",to:{name:"works"}},{default:b((function(){return[_]})),_:1}),Object(c["k"])(i,{class:"tab","active-class":"active",tag:"span",to:{name:"schedule"}},{default:b((function(){return[w]})),_:1})])]),Object(c["k"])("div",S,[Object(c["k"])(s,null,{default:b((function(e){var t=e.Component;return[(Object(c["t"])(),Object(c["g"])(c["b"],null,[(Object(c["t"])(),Object(c["g"])(Object(c["C"])(t)))],1024))]})),_:1})])])):Object(c["h"])("",!0),Object(c["k"])(c["c"],{name:"fade"},{default:b((function(){return[Object(c["K"])(Object(c["k"])("div",C,[Object(c["k"])("div",{class:"mask",onClick:t[5]||(t[5]=function(){return e.handle_dialog_close&&e.handle_dialog_close.apply(e,arguments)})}),Object(c["k"])("div",M,[Object(c["K"])(Object(c["k"])(l,{onClose:e.handle_dialog_close},null,8,["onClose"]),[[c["H"],"add"===e.dialogType]]),Object(c["K"])(Object(c["k"])(u,{onClose:e.handle_dialog_close},null,8,["onClose"]),[[c["H"],"remove"===e.dialogType]])])],512),[[c["H"],e.dialogShow]])]})),_:1})])})),P=n("5530"),I=n("ade3"),x=Object(c["M"])("data-v-62bd7a67");Object(c["w"])("data-v-62bd7a67");var D={class:"add-dialog",style:{width:"450px"}},T=Object(c["k"])("div",{class:"title"},"新建项目",-1),N={class:"field"},A=Object(c["k"])("div",{class:"label"},"名称",-1),E={class:"foot"};Object(c["u"])();var J=x((function(e,t,n,r,a,o){var i=Object(c["B"])("observe-visibility");return Object(c["K"])((Object(c["t"])(),Object(c["g"])("div",D,[T,Object(c["k"])("div",N,[A,Object(c["K"])(Object(c["k"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.name=t})},null,512),[[c["G"],e.name,void 0,{trim:!0}]])]),Object(c["k"])("div",E,[Object(c["k"])("button",{disabled:!e.confirmable,onClick:t[2]||(t[2]=function(){return e.handle_confirm_click&&e.handle_confirm_click.apply(e,arguments)})},"确定",8,["disabled"])])],512)),[[i,e.handle_visibility]])})),K=Object(c["l"])({name:"add-dialog",data:function(){return{name:""}},props:{show:{type:Boolean,default:!1}},computed:{confirmable:function(){return Boolean(this.name)}},watch:{show:function(){this.show||(this.name="")}},methods:{handle_visibility:function(e){e||(this.name="")},handle_confirm_click:function(){this.$store.dispatch("data/addProject",this.name),this.$emit("close")}}});n("7ea6");K.render=J,K.__scopeId="data-v-62bd7a67";var $=K,B=Object(c["M"])("data-v-1684add0");Object(c["w"])("data-v-1684add0");var L={class:"remove-dialog",style:{width:"450px"}},H=Object(c["k"])("div",{class:"title"},"删除项目项目",-1),q={class:"foot"};Object(c["u"])();var R=B((function(e,t,n,r,a,o){var i=Object(c["B"])("observe-visibility");return Object(c["K"])((Object(c["t"])(),Object(c["g"])("div",L,[H,Object(c["k"])("div",q,[Object(c["k"])("button",{onClick:t[1]||(t[1]=function(){return e.handle_cancel_click&&e.handle_cancel_click.apply(e,arguments)})},"取消"),Object(c["k"])("button",{onClick:t[2]||(t[2]=function(){return e.handle_confirm_click&&e.handle_confirm_click.apply(e,arguments)})},"确定")])],512)),[[i,e.handle_visibility]])})),U=Object(c["l"])({name:"remove-dialog",data:function(){return{name:""}},methods:{handle_confirm_click:function(){this.$store.dispatch("data/removeProject"),this.$emit("close")},handle_cancel_click:function(){this.$emit("close")}}});n("a821");U.render=R,U.__scopeId="data-v-1684add0";var W,G,V=U,z=n("5502");(function(e){e["config"]="config",e["word"]="work"})(G||(G={}));var F=Object(c["l"])({name:"layout",components:(W={},Object(I["a"])(W,$.name,$),Object(I["a"])(W,V.name,V),W),data:function(){return{Tab:G,dialogType:"",dialogShow:!1,tab:G.config}},computed:Object(P["a"])(Object(P["a"])({},Object(z["c"])("data",["current","directory"])),Object(z["b"])("data",["project"])),watch:{project:{handler:function(){this.$store.dispatch("data/saveProject")},deep:!0}},methods:{handle_entry_click:function(e){this.$store.commit("data/setCurrent",e)},handle_dialog_close:function(){this.dialogShow=!1},handle_add_click:function(){this.dialogType="add",this.dialogShow=!0},handle_name_change:function(){this.$store.commit("data/modifyDirectory",{id:this.current,name:this.project.name})},handle_remove_click:function(){this.dialogType="remove",this.dialogShow=!0},handle_tab_click:function(e){this.tab=e}}});n("4355");F.render=Y,F.__scopeId="data-v-4861d437";var Q=F,X=[{path:"/",component:Q,children:[{name:"config",path:"config",component:function(){return n.e("chunk-6b857236").then(n.bind(null,"a63a"))}},{name:"works",path:"works",component:function(){return n.e("chunk-00caf272").then(n.bind(null,"7eb6"))}},{name:"schedule",path:"schedule",component:function(){return n.e("chunk-0261934a").then(n.bind(null,"7fc9"))}}]}],Z=Object(s["a"])({history:Object(s["b"])(),routes:X}),ee=Z,te=(n("7db0"),n("c975"),n("a434"),n("25f0"),n("caad"),n("d81d5"),n("2532"),n("bee2")),ne=n("d4ec"),ce=n("5a0c"),re=n.n(ce),ae=n("2ef0"),oe=n.n(ae),ie={period:6,start:"",rest:[]},se=function e(t,n){Object(ne["a"])(this,e),this.status=!1,this.name=t,this.time=n,this.id=Math.floor(1e8*Math.random())},le=function(){function e(t,n,c){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object(ne["a"])(this,e),this.name=t,this.config=Object.assign({},ie,{start:re()().format("YYYY-MM-DD")},n),this.works=r,this.id=c||Math.floor(1e8*Math.random())}return Object(te["a"])(e,[{key:"addRest",value:function(e){var t=this.config.rest;t.push(e),t.sort((function(e,t){return e>t?1:-1})),t=oe.a.uniq(t),this.config.rest=t}},{key:"removeRest",value:function(e){var t=this.config.rest,n=t.indexOf(e);n>-1&&t.splice(n,1)}},{key:"addWork",value:function(e,t){this.works.push(new se(e,t))}},{key:"removeWork",value:function(e){var t=this.works.indexOf(e);t>-1&&this.works.splice(t,1)}},{key:"arrangeWork",value:function(e,t){var n=this.works.splice(e,1)[0];this.works.splice(t,0,n)}},{key:"generateSchedules",value:function(){var e=this,t=re()(this.config.start),n=0,c=this.works.map((function(c){var r=t.day();while(0===r||6===r||e.config.rest.includes(t.format("YYYY-MM-DD")))t=t.add(1,"day"),r=t.day();var a,o=t.format("YYYY-MM-DD");n+=c.time;var i=Math.floor(n/e.config.period);return t=t.add(i,"day"),n%=e.config.period,a=0===n?t.subtract(1,"day").format("YYYY-MM-DD"):t.format("YYYY-MM-DD"),{name:c.name,start:o,end:a}}));return c}}],[{key:"from",value:function(t){return new e(t.name,t.config,t.id,t.works)}}]),e}(),de=le,ue="current",fe="directory";function be(e){return"project_".concat(e)}var he={current:+(localStorage.getItem(ue)||0),directory:JSON.parse(localStorage.getItem(fe)||"[]"),project:null},ve={setCurrent:function(e,t){e.current=t,localStorage.setItem(ue,t.toString())},modifyDirectory:function(e,t){var n=t.id,c=t.name,r=e.directory.find((function(e){return e.id===n}));r&&(r.name=c,localStorage.setItem(fe,JSON.stringify(e.directory)))}},me={addProject:function(e,t){var n=e.state,c=e.commit,r=new de(t);n.directory.push({name:t,id:r.id}),localStorage.setItem(be(r.id),JSON.stringify(r)),localStorage.setItem(fe,JSON.stringify(n.directory)),c("setCurrent",r.id)},saveProject:function(e){var t=e.state,n=e.getters;t.current&&localStorage.setItem(be(t.current),JSON.stringify(n.project))},removeProject:function(e){var t=e.state,n=e.commit,c=t.directory.find((function(e){return e.id===t.current}));if(c){var r=t.directory.indexOf(c);r>-1&&t.directory.splice(r,1),localStorage.setItem(fe,JSON.stringify(t.directory)),localStorage.removeItem(be(t.current)),t.project=null,n("setCurrent","")}}},pe={project:function(e){var t;if((null===(t=e.project)||void 0===t?void 0:t.id)===e.current)return e.project;var n=localStorage.getItem(be(e.current));return n?(e.project=de.from(JSON.parse(n)),e.project):void 0}},je={namespaced:!0,state:he,mutations:ve,actions:me,getters:pe},Oe=Object(z["a"])({modules:{data:je}}),ge=(n("45fc"),n("4ec9"),n("3ca3"),n("ddb0"),new Map);function ke(e,t){var n=new IntersectionObserver((function(e){var n=e.some((function(e){return e.intersectionRatio>0}));"function"===typeof t.value&&t.value(n)}));n.observe(e),ge.set(e,n)}function ye(e){var t=ge.get(e);t&&(t.unobserve(e),t.disconnect(),ge.delete(e))}var _e={name:"observe",mounted:ke,unmounted:ye},we=_e,Se={"observe-visibility":we},Ce=Se,Me=Object(c["f"])(o);for(var Ye in Ce)Me.directive(Ye,Ce[Ye]);Me.use(Oe).use(ee).mount("#app")},d81d:function(e,t,n){"use strict";n("74cd")},e543:function(e,t,n){e.exports=n.p+"img/plus.902362bf.svg"}});
//# sourceMappingURL=app.bd4af5be.js.map